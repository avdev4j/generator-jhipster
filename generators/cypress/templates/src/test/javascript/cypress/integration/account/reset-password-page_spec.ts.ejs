import {
    usernameLoginSelector,
    forgetYourPasswordSelector,
    emailResetPasswordSelector,
    submitInitResetPasswordSelector
   } from '../../support/commands';

  describe('forgot your password', () => {
    before(() => {
      cy.window().then((win) => {
        win.sessionStorage.clear()
      });
      cy.visit('');
      cy.clickOnLoginItem();
      cy.get(usernameLoginSelector).type('admin');
      cy.get(forgetYourPasswordSelector).click();
    });

    beforeEach(() => {
      cy.server();
      cy.route('POST', '/api/account/reset-password/init').as('initResetPassword');
      cy.route('POST', '/api/account/reset-password/finish').as('finishResetPassword');
    });

    it('should be able to init reset password', () => {
      cy.get(emailResetPasswordSelector).clear().type('user@gmail.com');
      cy.get(submitInitResetPasswordSelector).click({ force: true });
      cy.wait('@initResetPassword').its('status').should('equal', 200);
    });
  });
